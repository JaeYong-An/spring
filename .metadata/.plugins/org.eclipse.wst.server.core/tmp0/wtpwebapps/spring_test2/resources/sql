1. User / DB 생성
-- root 계정으로 DB생성, User생성
--DB
create database mywebdb;
--User
create user 'mywebUser'@'localhost'
identified by 'mysql';
--권한부여
grant all privileges on mywebdb.* to
'mywebUser'@'localhost' with grant option;
--권한 확인
flush privileges;

---------------------일반적으로 DB는 _으로 단어구분
read_count(sql) => readCount(java)

-------------------------
DB테이블 생성
create table board(
bno bigint not null auto_increment,
title varchar(200) not null,
writer varchar(100) not null,
content text not null,
reg_at datetime default now(),
mod_at datetime default now(),
read_count int default 0,
cmt_qty int default 0,
has_file int default 0,
primary key(bno));

----------------------
pagung 
 - list의 내용을 10개씩 끊어서 출력
 select * from board order by bno desc limit 0, 10;
 
 limit 시작번지, 개수
 <1 2 3 4 5 6 7 8 9 10>
 1 => limit 0, 10 => (pagingNo - 1) * 10
 2 => limit 10, 10 => (pagingNo - 1) * 10
 3 => limit 20, 10 => (pagingNo - 1) * 10
 
 ----------------------------
 comment
 
 create table comment(
 cno bigint auto_increment,
 bno bigint not null,
 writer varchar(100) not null,
 content text not null,
 reg_at datetime default now(),
 mod_at datetime default now(),
 primary key(cno));
 
댓글 총 갯수 15 => 5개씩 3페이지
5개 => 더보기 = (page=1)
10개 => 더보기 = (page=2)
15개 => 더보기x

----------------------------
파일 업로드

D:\_myProject\_java\_fileUpload
file 설정
servlet config
경로 설정
webConfig
 - maxFileSize, maxReqSize, fileSizeThreshold
파일 테이블 구성
FileVO 생성

Sweeper(청소부)
DB의 파일명과 폴더안의 파일을 비교하여 다르면 삭제
스케줄러 기능
해당 스케줄에 맞춰 자동으로 실행

pom.xml
 - quartz 2.3.2
 - quartz-jobs 2.3.2

-------------------------
create table file(
uuid varchar(256) not null,
save_dir varchar(256) not null,
file_name varchar(256) not null,
file_type tinyint(1) default 0,
bno bigint,
file_size bigint,
reg_at dateTime default now(),
primary key(uuid));

---------------------------
detail.jsp - file line
boardcontroller - detail
boardservice - getdetail

--------------------------
update board b set cmt_qty =(select count(bno) form comment where bno = b.bno)
----------------------------
Security

member
 - 회원가입
 - 로그인
 (아이디/pass => db와 일치하는 값이 있는지 확인 => 로그인 진행(session 저장)
 
 - 로그아웃 (session 끊기)

User의 권한
 - ROLE_ADMIN
 - manager
 - ROLE_USER

-----------------------------
- security pom.xml 설정
 - spring-security-core 5.5.3
 - spring-security-config 5.5.3
 - spring-security-web 5.5.3
 - spring-security-taglib 5.5.3

-----------------------------
create table member(
email varchar(100) not null,
pwd varchar(1000) not null,
nick_name varchar(100) not null,
reg_at datetime default now(),
last_login datetime default null,
primary key(email));

create table auth_member(
email varchar(100) not null,
auth varchar(50) not null);

alter table auth_member add constraint fk_auth foreign key(email) references member(email);

------------------------------------

변경점
1. 비로그인시 댓글 등록창 안 보이게
2. 작성자와 로그인 이메일 불일치시 버튼 안 보이게
